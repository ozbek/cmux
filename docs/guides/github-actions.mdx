---
title: GitHub Actions
description: Automate your workflows with mux run in GitHub Actions
---

`mux run` is designed for automation scenarios like CI/CD pipelines. This guide shows how to integrate mux into your GitHub Actions workflows.

## Prerequisites

1. **API Key**: Add your `ANTHROPIC_API_KEY` (or other provider key) to your repository's secrets. See [Providers](/config/providers) for details on configuring API keys.
2. **npm/bun**: The workflow will install mux via `bunx` or `npx`

## Basic Usage

Here's a minimal example that runs mux in a GitHub Action:

```yaml
- name: Mux Review
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
    GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  run: bunx mux run "Review this PR for critical issues. If any are found, exit with 1 to block merge."
```

`mux run` supports agent-controlled exit codes, so the workflow step can fail when issues are found.

### Key Options for CI

| Option           | Purpose                                        |
| ---------------- | ---------------------------------------------- |
| `--quiet`        | Only output final result (cleaner logs)        |
| `--json`         | Machine-readable NDJSON output for parsing     |
| `--budget <usd>` | Limit spending per run (e.g., `--budget 1.00`) |

## Example: Auto-Label Issues and PRs

This is the exact workflow used live in the Mux repo (see [`.github/workflows/auto-label.yml`](https://github.com/coder/mux/blob/main/.github/workflows/auto-label.yml)). It automatically labels new issues and pull requests by having mux analyze the content and select appropriate labels from your repository's label set.

{/* BEGIN AUTO_LABEL_WORKFLOW */}

```yaml
# Auto-labels new issues and PRs using mux.
# SETUP: Add ANTHROPIC_API_KEY to repository secrets.
# Fork PRs are skipped (no secret access).

name: Auto-Label

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

permissions:
  issues: write
  pull-requests: write

jobs:
  label:
    runs-on: ubuntu-latest
    if: github.actor != 'dependabot[bot]'
    steps:
      - uses: actions/checkout@v4
        with:
          persist-credentials: false
      - uses: oven-sh/setup-bun@v2

      - name: Label with mux
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          TYPE: ${{ github.event_name == 'pull_request' && 'pr' || 'issue' }}
          NUMBER: ${{ github.event.issue.number || github.event.pull_request.number }}
        run: |
          [ -z "$ANTHROPIC_API_KEY" ] && echo "Skipping (no API key)" && exit 0

          bunx mux@next run --budget 0.50 "
            Label this GitHub $TYPE using ONLY existing labels. Steps:
            1. gh label list --json name,description
            2. gh $TYPE view $NUMBER
            3. gh $TYPE edit $NUMBER --add-label <labels>
            Pick 1-3 labels from the list in step 1. Do NOT create new labels.
            If no existing labels fit well, skip step 3.
          "
```

{/* END AUTO_LABEL_WORKFLOW */}

<CardGroup cols={2}>
  <Card title="CLI Reference" icon="terminal" href="/reference/cli">
    Full CLI documentation
  </Card>
  <Card title="Agentic Git Identity" icon="user-robot" href="/config/agentic-git-identity">
    Configure separate Git identity for AI commits
  </Card>
</CardGroup>
