---
title: Command Line Interface
description: Run one-off agent tasks from the command line with mux run
---

mux provides a CLI for running one-off agent tasks without the desktop app. Unlike the interactive desktop experience, `mux run` executes a single request to completion and exits.

## Installation

The CLI is available via npm and can be run directly with `npx`:

```bash
# Run without installing
npx mux run "Fix the failing tests"

# Or install globally
npm install -g mux
mux run "Fix the failing tests"
```

Using `npx mux` is especially convenient for CI/CD pipelines where you don't want to manage a global installation.

## `mux run`

Execute a one-off agent task:

```bash
# Basic usage - run in current directory
npx mux run "Fix the failing tests"

# Specify a directory
mux run --dir /path/to/project "Add authentication"

# Use SSH runtime
mux run --runtime "ssh user@myserver" "Deploy changes"

# Pipe instructions via stdin
echo "Add logging to all API endpoints" | mux run

# JSON output for scripts
mux run --json "List all TypeScript files" | jq '.type'
```

### Options

| Option                 | Short | Description                                                     | Default           |
| ---------------------- | ----- | --------------------------------------------------------------- | ----------------- |
| `--dir <path>`         | `-d`  | Project directory                                               | Current directory |
| `--model <model>`      | `-m`  | Model to use (e.g., `anthropic:claude-sonnet-4-5`)              | Default model     |
| `--runtime <runtime>`  | `-r`  | Runtime: `local`, `worktree`, `ssh <host>`, or `docker <image>` | `local`           |
| `--mode <mode>`        |       | Agent mode: `plan` or `exec`                                    | `exec`            |
| `--thinking <level>`   | `-t`  | Thinking level: `off`, `low`, `medium`, `high`                  | `medium`          |
| `--timeout <duration>` |       | Timeout (e.g., `5m`, `300s`, `300000`)                          | No timeout        |
| `--json`               |       | Output NDJSON for programmatic use                              | Off               |
| `--quiet`              | `-q`  | Only output final result                                        | Off               |
| `--workspace-id <id>`  |       | Explicit workspace ID                                           | Auto-generated    |
| `--config-root <path>` |       | mux config directory                                            | `~/.mux`          |

### Runtimes

- **`local`** (default): Runs directly in the specified directory. Best for one-off tasks.
- **`worktree`**: Creates an isolated git worktree under `~/.mux/src`. Useful for parallel work.
- **`ssh <host>`**: Runs on a remote machine via SSH. Example: `--runtime "ssh user@myserver.com"`
- **`docker <image>`**: Runs in a Docker container. Example: `--runtime "docker node:20"`

### Output Modes

- **Default (TTY)**: Human-readable streaming with tool call formatting
- **`--json`**: NDJSON streaming - each line is a JSON object with event data
- **`--quiet`**: Suppresses streaming output, only shows final assistant response

### Examples

```bash
# Quick fix in current directory
mux run "Fix the TypeScript errors"

# Use a specific model with extended thinking
mux run -m anthropic:claude-sonnet-4-5 -t high "Optimize database queries"

# Run on remote server
mux run -r "ssh dev@staging.example.com" -d /app "Update dependencies"

# Scripted usage with timeout
mux run --json --timeout 5m "Generate API documentation" > output.jsonl
```

### CI/CD Automation

`npx mux run` works well in CI pipelines. Here's a GitHub Actions example:

```yaml
- name: Fix lint errors with mux
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
  run: npx mux run --timeout 5m "Fix the ESLint errors in this PR"

- name: Generate changelog
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
  run: |
    npx mux run --json --quiet "Generate a changelog entry for this PR" \
      > changelog.json
```

Key considerations for CI:

- **Always set `--timeout`** to prevent runaway jobs
- **Use `--json`** for machine-readable output you can parse downstream
- **Use `--quiet`** when you only need the final result
- **Provide API keys** via environment variables (e.g., `ANTHROPIC_API_KEY`)

## `mux server`

Start the HTTP/WebSocket server for remote access (e.g., from mobile devices):

```bash
mux server --port 3000 --host 0.0.0.0
```

Options:

- `--host <host>` - Host to bind to (default: `localhost`)
- `--port <port>` - Port to bind to (default: `3000`)
- `--auth-token <token>` - Optional bearer token for authentication
- `--add-project <path>` - Add and open project at the specified path

## `mux desktop`

Launch the desktop app. This is automatically invoked when running the packaged app or via `electron .`:

```bash
mux desktop
```

Note: Requires Electron. When running `mux` with no arguments under Electron, the desktop app launches automatically.

## `mux --version`

Print the version and git commit:

```bash
mux --version
# v0.8.4 (abc123)
```

## Debug Environment Variables

These environment variables help diagnose issues with LLM requests and responses.

| Variable                | Purpose                                                                                                                                                                 |
| ----------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `MUX_DEBUG_LLM_REQUEST` | Set to `1` to log the complete LLM request (system prompt, messages, tools, provider options) as formatted JSON to the debug logs. Useful for diagnosing prompt issues. |

Example usage:

```bash
MUX_DEBUG_LLM_REQUEST=1 mux run "Hello world"
```

The output includes:

- `systemMessage`: The full system prompt sent to the model
- `messages`: All conversation messages in the request
- `tools`: Tool definitions with descriptions and input schemas
- `providerOptions`: Provider-specific options (thinking level, etc.)
- `mode`, `thinkingLevel`, `maxOutputTokens`, `toolPolicy`
